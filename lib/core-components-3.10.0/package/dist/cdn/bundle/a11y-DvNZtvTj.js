"use strict";class e{constructor(e){this.createLiveRegions(),this.setContainer(e)}setContainer(e){e instanceof HTMLElement?this.containerEl=e:this.containerEl="string"==typeof e?document.querySelector(e):document.body,this.appendLiveRegions()}getLiveRegion(e){return e&&void 0!==this.regions[e]?this.regions[e]:this.regions.polite}clear(e){this.getLiveRegion(e).clear()}appendMessage(e,t,i){this.getLiveRegion(t).push(e,i)}prependMessage(e,t,i){this.getLiveRegion(t).unshift(e,i)}reset(){for(const e in this.regions)this.regions[e].remove();this.createLiveRegions(),this.appendLiveRegions()}createLiveRegions(){this.regions={polite:new t("polite",1e3,500),assertive:new t("assertive",300,300),status:new t("status",1e3,500),alert:new t("alert",300,300)}}appendLiveRegions(){for(const e in this.regions){const t=this.regions[e];t.remove(),this.containerEl instanceof HTMLElement&&(this.containerEl.appendChild(t.el),t.start(500))}}}class t{constructor(e,i,s){this.queue=[],this.timeout=null,this.name=e,this.dwellTime=i,this.clearTime=s,this.el=document.createElement("div"),this.el.setAttribute("style",t.style),this.el.setAttribute("data-saf-a11y","live"),"status"==e||"alert"==e?this.el.setAttribute("role",e):(this.el.setAttribute("aria-live",e),this.el.setAttribute("aria-atomic","true"))}push(e,t){this.queue.push({text:e,callback:t}),this.queueAnnouncement()}unshift(e,t){this.queue.unshift({text:e,callback:t}),this.queueAnnouncement()}clear(){this.stop(),this.queue.length=0}stop(){clearTimeout(this.timeout),this.timeout=null}start(e=0){this.timeout=setTimeout(()=>{this.timeout=null,this.queueAnnouncement()},e)}remove(){this.clear(),this.el.remove()}queueAnnouncement(){if(this.timeout||this.queue.length<1)return;const e=this.queue.shift();void 0!==e&&(this.el.textContent=e.text,e.callback&&e.callback(this.name,e.text),this.timeout=setTimeout(()=>{clearTimeout(this.timeout),this.el.textContent="",this.timeout=setTimeout(()=>{clearTimeout(this.timeout),this.timeout=null,this.queueAnnouncement()},this.clearTime)},this.dwellTime))}}t.style="border:0;clip-path:inset(50%);height:0px;margin:0;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:0px;",exports.SafA11y=class{static get queue(){return this._queue||(this._queue=new e(this._container))}static get liveRegionStyle(){return t.style}static set liveRegionStyle(e){t.style=e}static get liveRegionContainer(){return this._container}static set liveRegionContainer(e){this._container=e,this._queue&&this._queue.setContainer(e)}static announce(e,t,i){this.queue.appendMessage(e,t,i)}static announceNext(e,t,i){this.queue.prependMessage(e,t,i)}};
