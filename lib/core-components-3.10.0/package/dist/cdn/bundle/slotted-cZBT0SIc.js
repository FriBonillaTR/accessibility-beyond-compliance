"use strict";var e=require("./fast-element-DOTfrYFb.js"),t=require("@saffron/config");const s=e=>1===e.nodeType;class r extends e.StatelessAttachedAttributeDirective{get id(){return this._id}set id(e){this._id=e,this._controllerProperty=`${e}-c`}bind(e){const t=e.targets[this.targetNodeId];t[this._controllerProperty]=e,this.updateTarget(e.source,this.computeNodes(t)),this.observe(t),e.onUnbind(this)}unbind(t){const s=t.targets[this.targetNodeId];this.updateTarget(t.source,e.emptyArray),this.disconnect(s),s[this._controllerProperty]=null}getSource(e){return e[this._controllerProperty].source}updateTarget(e,t){e[this.options.property]=t}computeNodes(e){let t=this.getNodes(e);return"filter"in this.options&&(t=t.filter(this.options.filter)),t}}const o="slotchange";class i extends r{observe(e){e.addEventListener(o,this)}disconnect(e){e.removeEventListener(o,this)}getNodes(e){return e.assignedNodes(this.options)}handleEvent(e){const t=e.currentTarget;this.updateTarget(this.getSource(t),this.computeNodes(t))}}e.HTMLDirective.define(i),exports.NodeObservationDirective=r,exports.elements=e=>e?s=>1===s.nodeType&&s.matches(e.replace(/saf-(\w+)((-\w+)*)/g,e=>t.getComponentName(e))):s,exports.slotted=function(t){return e.isString(t)&&(t={property:t}),new i(t)};
