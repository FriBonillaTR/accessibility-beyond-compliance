"use strict";var t=require("@saffron/config"),e=require("tslib"),i=require("./fast-element-DOTfrYFb.js"),s=require("./when-0aDJpnLk.js"),o=require("./ref-BeTe_0iT.js"),n=require("@microsoft/fast-web-utilities"),a=require("./direction-CkR1Fynu.js"),r=require("./global-enums-58U8enSy.js"),h=require("./define-CgQAavGn.js"),l=require("./saf-divider.js"),c=require("./saf-icon.js");class d extends i.FASTElement{constructor(){super(...arguments),this.anchor="",this.viewport="",this.horizontalPositioningMode="uncontrolled",this.horizontalDefaultPosition="unset",this.horizontalViewportLock=!1,this.horizontalInset=!1,this.horizontalScaling="content",this.verticalPositioningMode="uncontrolled",this.verticalDefaultPosition="unset",this.verticalViewportLock=!1,this.verticalInset=!1,this.verticalScaling="content",this.fixedPlacement=!1,this.autoUpdateMode="anchor",this.anchorElement=null,this.viewportElement=null,this.initialLayoutComplete=!1,this.resizeDetector=null,this.baseHorizontalOffset=0,this.baseVerticalOffset=0,this.pendingPositioningUpdate=!1,this.pendingReset=!1,this.currentDirection=n.Direction.ltr,this.regionVisible=!1,this.forceUpdate=!1,this.updateThreshold=.5,this.update=()=>{this.pendingPositioningUpdate||this.requestPositionUpdates()},this.startObservers=()=>{this.stopObservers(),null!==this.anchorElement&&(this.requestPositionUpdates(),null!==this.resizeDetector&&(this.resizeDetector.observe(this.anchorElement),this.resizeDetector.observe(this)))},this.requestPositionUpdates=()=>{null===this.anchorElement||this.pendingPositioningUpdate||(d.intersectionService.requestPosition(this,this.handleIntersection),d.intersectionService.requestPosition(this.anchorElement,this.handleIntersection),null!==this.viewportElement&&d.intersectionService.requestPosition(this.viewportElement,this.handleIntersection),this.pendingPositioningUpdate=!0)},this.stopObservers=()=>{this.pendingPositioningUpdate&&(this.pendingPositioningUpdate=!1,d.intersectionService.cancelRequestPosition(this,this.handleIntersection),null!==this.anchorElement&&d.intersectionService.cancelRequestPosition(this.anchorElement,this.handleIntersection),null!==this.viewportElement&&d.intersectionService.cancelRequestPosition(this.viewportElement,this.handleIntersection)),null!==this.resizeDetector&&this.resizeDetector.disconnect()},this.getViewport=()=>{if("string"!=typeof this.viewport||""===this.viewport)return document.documentElement;const t=this.getRootNode();return t instanceof ShadowRoot?t.getElementById(this.viewport):document.getElementById(this.viewport)},this.getAnchor=()=>{const t=this.getRootNode();return t instanceof ShadowRoot?t.getElementById(this.anchor):document.getElementById(this.anchor)},this.handleIntersection=t=>{this.pendingPositioningUpdate&&(this.pendingPositioningUpdate=!1,this.applyIntersectionEntries(t)&&this.updateLayout())},this.applyIntersectionEntries=t=>{const e=t.find(t=>t.target===this),i=t.find(t=>t.target===this.anchorElement),s=t.find(t=>t.target===this.viewportElement);return void 0!==e&&void 0!==s&&void 0!==i&&(!!(!this.regionVisible||this.forceUpdate||void 0===this.regionRect||void 0===this.anchorRect||void 0===this.viewportRect||this.isRectDifferent(this.anchorRect,i.boundingClientRect)||this.isRectDifferent(this.viewportRect,s.boundingClientRect)||this.isRectDifferent(this.regionRect,e.boundingClientRect))&&(this.regionRect=e.boundingClientRect,this.anchorRect=i.boundingClientRect,this.viewportElement===document.documentElement?this.viewportRect=new DOMRectReadOnly(s.boundingClientRect.x+document.documentElement.scrollLeft,s.boundingClientRect.y+document.documentElement.scrollTop,s.boundingClientRect.width,s.boundingClientRect.height):this.viewportRect=s.boundingClientRect,this.updateRegionOffset(),this.forceUpdate=!1,!0))},this.updateRegionOffset=()=>{this.anchorRect&&this.regionRect&&(this.baseHorizontalOffset=this.baseHorizontalOffset+(this.anchorRect.left-this.regionRect.left)+(this.translateX-this.baseHorizontalOffset),this.baseVerticalOffset=this.baseVerticalOffset+(this.anchorRect.top-this.regionRect.top)+(this.translateY-this.baseVerticalOffset))},this.isRectDifferent=(t,e)=>Math.abs(t.top-e.top)>this.updateThreshold||Math.abs(t.right-e.right)>this.updateThreshold||Math.abs(t.bottom-e.bottom)>this.updateThreshold||Math.abs(t.left-e.left)>this.updateThreshold,this.handleResize=t=>{this.update()},this.reset=()=>{this.pendingReset&&(this.pendingReset=!1,null===this.anchorElement&&(this.anchorElement=this.getAnchor()),null===this.viewportElement&&(this.viewportElement=this.getViewport()),this.currentDirection=a.getDirection(this),this.startObservers())},this.updateLayout=()=>{let t,e;if("uncontrolled"!==this.horizontalPositioningMode){const t=this.getPositioningOptions(this.horizontalInset);if("center"===this.horizontalDefaultPosition)e="center";else if("unset"!==this.horizontalDefaultPosition){let t=this.horizontalDefaultPosition;if("start"===t||"end"===t){const e=a.getDirection(this);if(e!==this.currentDirection)return this.currentDirection=e,void this.initialize();t=this.currentDirection===n.Direction.ltr?"start"===t?"left":"right":"start"===t?"right":"left"}switch(t){case"left":e=this.horizontalInset?"insetStart":"start";break;case"right":e=this.horizontalInset?"insetEnd":"end"}}const i=void 0!==this.horizontalThreshold?this.horizontalThreshold:void 0!==this.regionRect?this.regionRect.width:0,s=void 0!==this.anchorRect?this.anchorRect.left:0,o=void 0!==this.anchorRect?this.anchorRect.right:0,r=void 0!==this.anchorRect?this.anchorRect.width:0,h=void 0!==this.viewportRect?this.viewportRect.left:0,l=void 0!==this.viewportRect?this.viewportRect.right:0;(void 0===e||"locktodefault"!==this.horizontalPositioningMode&&this.getAvailableSpace(e,s,o,r,h,l)<i)&&(e=this.getAvailableSpace(t[0],s,o,r,h,l)>this.getAvailableSpace(t[1],s,o,r,h,l)?t[0]:t[1])}if("uncontrolled"!==this.verticalPositioningMode){const e=this.getPositioningOptions(this.verticalInset);if("center"===this.verticalDefaultPosition)t="center";else if("unset"!==this.verticalDefaultPosition)switch(this.verticalDefaultPosition){case"top":t=this.verticalInset?"insetStart":"start";break;case"bottom":t=this.verticalInset?"insetEnd":"end"}const i=void 0!==this.verticalThreshold?this.verticalThreshold:void 0!==this.regionRect?this.regionRect.height:0,s=void 0!==this.anchorRect?this.anchorRect.top:0,o=void 0!==this.anchorRect?this.anchorRect.bottom:0,n=void 0!==this.anchorRect?this.anchorRect.height:0,a=void 0!==this.viewportRect?this.viewportRect.top:0,r=void 0!==this.viewportRect?this.viewportRect.bottom:0;(void 0===t||"locktodefault"!==this.verticalPositioningMode&&this.getAvailableSpace(t,s,o,n,a,r)<i)&&(t=this.getAvailableSpace(e[0],s,o,n,a,r)>this.getAvailableSpace(e[1],s,o,n,a,r)?e[0]:e[1])}const i=this.getNextRegionDimension(e,t),s=this.horizontalPosition!==e||this.verticalPosition!==t;if(this.setHorizontalPosition(e,i),this.setVerticalPosition(t,i),this.updateRegionStyle(),!this.initialLayoutComplete)return this.initialLayoutComplete=!0,void this.requestPositionUpdates();this.regionVisible||(this.regionVisible=!0,this.style.removeProperty("pointer-events"),this.style.removeProperty("opacity"),this.classList.toggle("loaded",!0),this.$emit("loaded",this,{bubbles:!1})),this.updatePositionClasses(),s&&this.$emit("positionchange",this,{bubbles:!1})},this.updateRegionStyle=()=>{this.style.width=this.regionWidth,this.style.height=this.regionHeight,this.style.transform=`translate(${this.translateX}px, ${this.translateY}px)`},this.updatePositionClasses=()=>{this.classList.toggle("top","start"===this.verticalPosition),this.classList.toggle("bottom","end"===this.verticalPosition),this.classList.toggle("inset-top","insetStart"===this.verticalPosition),this.classList.toggle("inset-bottom","insetEnd"===this.verticalPosition),this.classList.toggle("vertical-center","center"===this.verticalPosition),this.classList.toggle("left","start"===this.horizontalPosition),this.classList.toggle("right","end"===this.horizontalPosition),this.classList.toggle("inset-left","insetStart"===this.horizontalPosition),this.classList.toggle("inset-right","insetEnd"===this.horizontalPosition),this.classList.toggle("horizontal-center","center"===this.horizontalPosition)},this.setHorizontalPosition=(t,e)=>{if(void 0===t||void 0===this.regionRect||void 0===this.anchorRect||void 0===this.viewportRect)return;let i=0;switch(this.horizontalScaling){case"anchor":case"fill":i=this.horizontalViewportLock?this.viewportRect.width:e.width,this.regionWidth=`${i}px`;break;case"content":i=this.regionRect.width,this.regionWidth="unset"}let s=0;switch(t){case"start":this.translateX=this.baseHorizontalOffset-i,this.horizontalViewportLock&&this.anchorRect.left>this.viewportRect.right&&(this.translateX=this.translateX-(this.anchorRect.left-this.viewportRect.right));break;case"insetStart":this.translateX=this.baseHorizontalOffset-i+this.anchorRect.width,this.horizontalViewportLock&&this.anchorRect.right>this.viewportRect.right&&(this.translateX=this.translateX-(this.anchorRect.right-this.viewportRect.right));break;case"insetEnd":this.translateX=this.baseHorizontalOffset,this.horizontalViewportLock&&this.anchorRect.left<this.viewportRect.left&&(this.translateX=this.translateX-(this.anchorRect.left-this.viewportRect.left));break;case"end":this.translateX=this.baseHorizontalOffset+this.anchorRect.width,this.horizontalViewportLock&&this.anchorRect.right<this.viewportRect.left&&(this.translateX=this.translateX-(this.anchorRect.right-this.viewportRect.left));break;case"center":if(s=(this.anchorRect.width-i)/2,this.translateX=this.baseHorizontalOffset+s,this.horizontalViewportLock){const t=this.anchorRect.left+s,e=this.anchorRect.right-s;t<this.viewportRect.left&&!(e>this.viewportRect.right)?this.translateX=this.translateX-(t-this.viewportRect.left):e>this.viewportRect.right&&!(t<this.viewportRect.left)&&(this.translateX=this.translateX-(e-this.viewportRect.right))}}this.horizontalPosition=t},this.setVerticalPosition=(t,e)=>{if(void 0===t||void 0===this.regionRect||void 0===this.anchorRect||void 0===this.viewportRect)return;let i=0;switch(this.verticalScaling){case"anchor":case"fill":i=this.verticalViewportLock?this.viewportRect.height:e.height,this.regionHeight=`${i}px`;break;case"content":i=this.regionRect.height,this.regionHeight="unset"}let s=0;switch(t){case"start":this.translateY=this.baseVerticalOffset-i,this.verticalViewportLock&&this.anchorRect.top>this.viewportRect.bottom&&(this.translateY=this.translateY-(this.anchorRect.top-this.viewportRect.bottom));break;case"insetStart":this.translateY=this.baseVerticalOffset-i+this.anchorRect.height,this.verticalViewportLock&&this.anchorRect.bottom>this.viewportRect.bottom&&(this.translateY=this.translateY-(this.anchorRect.bottom-this.viewportRect.bottom));break;case"insetEnd":this.translateY=this.baseVerticalOffset,this.verticalViewportLock&&this.anchorRect.top<this.viewportRect.top&&(this.translateY=this.translateY-(this.anchorRect.top-this.viewportRect.top));break;case"end":this.translateY=this.baseVerticalOffset+this.anchorRect.height,this.verticalViewportLock&&this.anchorRect.bottom<this.viewportRect.top&&(this.translateY=this.translateY-(this.anchorRect.bottom-this.viewportRect.top));break;case"center":if(s=(this.anchorRect.height-i)/2,this.translateY=this.baseVerticalOffset+s,this.verticalViewportLock){const t=this.anchorRect.top+s,e=this.anchorRect.bottom-s;t<this.viewportRect.top&&!(e>this.viewportRect.bottom)?this.translateY=this.translateY-(t-this.viewportRect.top):e>this.viewportRect.bottom&&!(t<this.viewportRect.top)&&(this.translateY=this.translateY-(e-this.viewportRect.bottom))}}this.verticalPosition=t},this.getPositioningOptions=t=>t?["insetStart","insetEnd"]:["start","end"],this.getAvailableSpace=(t,e,i,s,o,n)=>{const a=e-o,r=n-(e+s);switch(t){case"start":return a;case"insetStart":return a+s;case"insetEnd":return r+s;case"end":return r;case"center":return 2*Math.min(a,r)+s}},this.getNextRegionDimension=(t,e)=>{const i={height:void 0!==this.regionRect?this.regionRect.height:0,width:void 0!==this.regionRect?this.regionRect.width:0};return void 0!==t&&"fill"===this.horizontalScaling?i.width=this.getAvailableSpace(t,void 0!==this.anchorRect?this.anchorRect.left:0,void 0!==this.anchorRect?this.anchorRect.right:0,void 0!==this.anchorRect?this.anchorRect.width:0,void 0!==this.viewportRect?this.viewportRect.left:0,void 0!==this.viewportRect?this.viewportRect.right:0):"anchor"===this.horizontalScaling&&(i.width=void 0!==this.anchorRect?this.anchorRect.width:0),void 0!==e&&"fill"===this.verticalScaling?i.height=this.getAvailableSpace(e,void 0!==this.anchorRect?this.anchorRect.top:0,void 0!==this.anchorRect?this.anchorRect.bottom:0,void 0!==this.anchorRect?this.anchorRect.height:0,void 0!==this.viewportRect?this.viewportRect.top:0,void 0!==this.viewportRect?this.viewportRect.bottom:0):"anchor"===this.verticalScaling&&(i.height=void 0!==this.anchorRect?this.anchorRect.height:0),i},this.startAutoUpdateEventListeners=()=>{window.addEventListener(n.eventResize,this.update,{passive:!0}),window.addEventListener(n.eventScroll,this.update,{passive:!0,capture:!0}),null!==this.resizeDetector&&null!==this.viewportElement&&this.resizeDetector.observe(this.viewportElement)},this.stopAutoUpdateEventListeners=()=>{window.removeEventListener(n.eventResize,this.update),window.removeEventListener(n.eventScroll,this.update),null!==this.resizeDetector&&null!==this.viewportElement&&this.resizeDetector.unobserve(this.viewportElement)},this.density=r.ComponentDensityEnum.inherit}anchorChanged(){this.initialLayoutComplete&&(this.anchorElement=this.getAnchor())}viewportChanged(){this.initialLayoutComplete&&(this.viewportElement=this.getViewport())}horizontalPositioningModeChanged(){this.requestReset()}horizontalDefaultPositionChanged(){this.updateForAttributeChange()}horizontalViewportLockChanged(){this.updateForAttributeChange()}horizontalInsetChanged(){this.updateForAttributeChange()}horizontalThresholdChanged(){this.updateForAttributeChange()}horizontalScalingChanged(){this.updateForAttributeChange()}verticalPositioningModeChanged(){this.requestReset()}verticalDefaultPositionChanged(){this.updateForAttributeChange()}verticalViewportLockChanged(){this.updateForAttributeChange()}verticalInsetChanged(){this.updateForAttributeChange()}verticalThresholdChanged(){this.updateForAttributeChange()}verticalScalingChanged(){this.updateForAttributeChange()}fixedPlacementChanged(){this.$fastController.isConnected&&this.initialLayoutComplete&&this.initialize()}autoUpdateModeChanged(t,e){this.$fastController.isConnected&&this.initialLayoutComplete&&("auto"===t&&this.stopAutoUpdateEventListeners(),"auto"===e&&this.startAutoUpdateEventListeners())}anchorElementChanged(){this.requestReset()}viewportElementChanged(){this.$fastController.isConnected&&this.initialLayoutComplete&&this.initialize()}connectedCallback(){super.connectedCallback(),"auto"===this.autoUpdateMode&&this.startAutoUpdateEventListeners(),this.initialize()}disconnectedCallback(){super.disconnectedCallback(),"auto"===this.autoUpdateMode&&this.stopAutoUpdateEventListeners(),this.stopObservers(),this.disconnectResizeDetector()}adoptedCallback(){this.initialize()}disconnectResizeDetector(){null!==this.resizeDetector&&(this.resizeDetector.disconnect(),this.resizeDetector=null)}initializeResizeDetector(){this.disconnectResizeDetector(),this.resizeDetector=new window.ResizeObserver(this.handleResize)}updateForAttributeChange(){this.$fastController.isConnected&&this.initialLayoutComplete&&(this.forceUpdate=!0,this.update())}initialize(){this.initializeResizeDetector(),null===this.anchorElement&&(this.anchorElement=this.getAnchor()),this.requestReset()}requestReset(){this.$fastController.isConnected&&!1===this.pendingReset&&(this.setInitialState(),i.Updates.enqueue(()=>this.reset()),this.pendingReset=!0)}setInitialState(){this.initialLayoutComplete=!1,this.regionVisible=!1,this.translateX=0,this.translateY=0,this.baseHorizontalOffset=0,this.baseVerticalOffset=0,this.viewportRect=void 0,this.regionRect=void 0,this.anchorRect=void 0,this.verticalPosition=void 0,this.horizontalPosition=void 0,this.style.opacity="0",this.style.pointerEvents="none",this.forceUpdate=!1,this.style.position=this.fixedPlacement?"fixed":"absolute",this.updatePositionClasses(),this.updateRegionStyle()}}d.intersectionService=new class{constructor(){this.intersectionDetector=null,this.observedElements=new Map,this.requestPosition=(t,e)=>{var i;null!==this.intersectionDetector&&(this.observedElements.has(t)?null===(i=this.observedElements.get(t))||void 0===i||i.push(e):(this.observedElements.set(t,[e]),this.intersectionDetector.observe(t)))},this.cancelRequestPosition=(t,e)=>{const i=this.observedElements.get(t);if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}},this.initializeIntersectionDetector=()=>{globalThis.IntersectionObserver&&(this.intersectionDetector=new IntersectionObserver(this.handleIntersection,{root:null,rootMargin:"0px",threshold:[0,1]}))},this.handleIntersection=t=>{if(null===this.intersectionDetector)return;const e=[],i=[];t.forEach(t=>{var s;null===(s=this.intersectionDetector)||void 0===s||s.unobserve(t.target);const o=this.observedElements.get(t.target);void 0!==o&&(o.forEach(s=>{let o=e.indexOf(s);-1===o&&(o=e.length,e.push(s),i.push([])),i[o].push(t)}),this.observedElements.delete(t.target))}),e.forEach((t,e)=>{t(i[e])})},this.initializeIntersectionDetector()}},e.__decorate([i.attr],d.prototype,"anchor",void 0),e.__decorate([i.attr],d.prototype,"viewport",void 0),e.__decorate([i.attr({attribute:"horizontal-positioning-mode"})],d.prototype,"horizontalPositioningMode",void 0),e.__decorate([i.attr({attribute:"horizontal-default-position"})],d.prototype,"horizontalDefaultPosition",void 0),e.__decorate([i.attr({attribute:"horizontal-viewport-lock",mode:"boolean"})],d.prototype,"horizontalViewportLock",void 0),e.__decorate([i.attr({attribute:"horizontal-inset",mode:"boolean"})],d.prototype,"horizontalInset",void 0),e.__decorate([i.attr({attribute:"horizontal-threshold"})],d.prototype,"horizontalThreshold",void 0),e.__decorate([i.attr({attribute:"horizontal-scaling"})],d.prototype,"horizontalScaling",void 0),e.__decorate([i.attr({attribute:"vertical-positioning-mode"})],d.prototype,"verticalPositioningMode",void 0),e.__decorate([i.attr({attribute:"vertical-default-position"})],d.prototype,"verticalDefaultPosition",void 0),e.__decorate([i.attr({attribute:"vertical-viewport-lock",mode:"boolean"})],d.prototype,"verticalViewportLock",void 0),e.__decorate([i.attr({attribute:"vertical-inset",mode:"boolean"})],d.prototype,"verticalInset",void 0),e.__decorate([i.attr({attribute:"vertical-threshold"})],d.prototype,"verticalThreshold",void 0),e.__decorate([i.attr({attribute:"vertical-scaling"})],d.prototype,"verticalScaling",void 0),e.__decorate([i.attr({attribute:"fixed-placement",mode:"boolean"})],d.prototype,"fixedPlacement",void 0),e.__decorate([i.attr({attribute:"auto-update-mode"})],d.prototype,"autoUpdateMode",void 0),e.__decorate([i.observable],d.prototype,"anchorElement",void 0),e.__decorate([i.observable],d.prototype,"viewportElement",void 0),e.__decorate([i.observable],d.prototype,"initialLayoutComplete",void 0),e.__decorate([i.attr],d.prototype,"density",void 0);const p=()=>d.define({name:t.getComponentName("saf-anchored-region"),template:i.html`
		<template data-loaded="${t=>t.initialLayoutComplete?"loaded":""}">
			${s.when(t=>t.initialLayoutComplete,i.html` <slot></slot> `)}
		</template>
	`,styles:i.css`
	${t.replaceComponentNamesWithSafAttribute(':host{contain:layout;display:block;z-index:var(--saf-z-index-dropdown)}:host ::slotted(saf-dialog){overflow:unset;padding:0;width:auto}:host([density=standard]){--saf-density: 0}:host([density=compact]){--saf-density: 1}:host([density=""]){--saf-density: 2}')}
`,registry:t.getRegistry()});class u extends i.FASTElement{constructor(){super(...arguments),this.globalAriaLabel="Global",this.tasksAriaLabel="Product",this.isMenuOpen=!1,this._showDivider=!1,this._hasMenuItems=!1,this.productHeaderItems=[t.getComponentName("saf-button"),t.getComponentName("saf-search-field"),t.getComponentName("saf-anchor")]}addProductHeaderItemAttribute(){var e,i,s;const o=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector('slot[name="global"]'),n=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector('slot[name="tasks"]'),a=null===(s=this.shadowRoot)||void 0===s?void 0:s.querySelector('slot[name="side-nav-trigger"]'),r=[o,n];if(a){a.assignedElements({flatten:!1}).forEach(t=>{t.setAttribute("product-header-item","")})}r.forEach(e=>{if(e){e.assignedElements({flatten:!1}).forEach(e=>{e.querySelectorAll(`:scope > ${t.getComponentName("saf-product-header-item")}`).forEach(t=>{this.productHeaderItems.forEach(e=>{t.querySelectorAll(`:scope > ${e}`).forEach(t=>{t.setAttribute("product-header-item","")})})})})}});this.querySelectorAll(`:scope > ${t.getComponentName("saf-anchor")}`).forEach(t=>{t.setAttribute("product-header-item","")})}connectedCallback(){super.connectedCallback(),this.addProductHeaderItemAttribute(),this.checkDivider(),this.checkMenuItems(),this.checkLogo(),document.addEventListener("click",this.handleClickOutside.bind(this))}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("click",this.handleClickOutside.bind(this)),this.anchoredRegion.removeEventListener("keydown",this.handleBackgroundKeyDown.bind(this)),this.menuButton.removeEventListener("keydown",this.handleButtonKeyDown.bind(this)),this.menuButton.removeEventListener("click",this.handleMenuButtonClick.bind(this))}checkMenuItems(){var t;this.querySelector("[slot=menu]")&&(this.prodHeaderMenuItems=Array.from(null===(t=this.querySelector("[slot=menu]"))||void 0===t?void 0:t.children),this._hasMenuItems=!0)}checkDivider(){var t,e;const i=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("slot[name=global]"),s=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("slot[name=tasks");i.assignedNodes().length>0&&s.assignedNodes().length>0&&(this._showDivider=!0)}checkLogo(){var e;const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("slot[name=logo]");if(i){i.assignedNodes({flatten:!0}).forEach(e=>{if(e instanceof HTMLElement){e.querySelectorAll(t.getComponentName("saf-logo")).forEach(t=>{t.setAttribute("product-header-logo","saf-logo")})}})}this.querySelectorAll(t.getComponentName("saf-logo")).forEach(t=>{t.setAttribute("product-header-logo","saf-logo")})}handleClickOutside(t){"BUTTON"!==t.composedPath()[0].tagName&&this.isMenuOpen&&(this.menuButton.focus(),this.removeSelectedClass(),this.closeMenu())}handleButtonKeyDown(t){if("Enter"!==t.key&&"ArrowDown"!==t.key&&" "!==t.key)return!0;this.handleMenuButtonClick()}removeSelectedClass(){this.prodHeaderMenuItems.forEach(t=>{t.classList.contains("selected")&&t.classList.remove("selected")})}handleBackgroundKeyDown(t){if("Escape"===t.key&&(this.menuButton.focus(),this.removeSelectedClass(),this.closeMenu()),"Tab"===t.key||"Enter"===t.key||" "===t.key)return this.removeSelectedClass(),this.closeMenu(),!0}handleMenuButtonClick(){this.isMenuOpen=!this.isMenuOpen,this.isMenuOpen&&setTimeout(()=>{this.prodHeaderMenuItems[0].focus()},60)}closeMenu(){setTimeout(()=>{this.isMenuOpen=!1},60)}}e.__decorate([i.attr({attribute:"global-aria-label"})],u.prototype,"globalAriaLabel",void 0),e.__decorate([i.attr({attribute:"tasks-aria-label"})],u.prototype,"tasksAriaLabel",void 0),e.__decorate([i.attr({attribute:"is-menu-open"})],u.prototype,"isMenuOpen",void 0),e.__decorate([i.observable],u.prototype,"_showDivider",void 0),e.__decorate([i.attr({attribute:"has-menu-items"})],u.prototype,"_hasMenuItems",void 0);exports.SafAnchoredRegion=p,exports.SafProductHeader=()=>(h.SafButton(),l.default(),c.default(),p(),u.define({name:t.getComponentName("saf-product-header"),template:i.html`
	<header>
		<div class="side-nav-trigger" part="side-nav-trigger">
			<slot name="side-nav-trigger"></slot>
		</div>
		<slot name="logo"></slot>
		<div class="navigation" part="navigation">
			<span
				class="tasks-navigation"
				part="tasks-navigation"
				role="navigation"
				aria-label="${t=>t.tasksAriaLabel}"
			>
				<span class="tasks-list" part="tasks-list" role="list">
					<slot name="tasks"></slot>
				</span>
			</span>
			${s.when(t=>t._showDivider,i.html`<saf-divider orientation="vertical" role="separator"></saf-divider>`)}
			<span
				class="global-navigation"
				part="global-navigation"
				role="navigation"
				aria-label="${t=>t.globalAriaLabel}"
			>
				<span class="global-list" part="global-list" role="list">
					<slot name="global"></slot>
				</span>
			</span>
			<div class="mobile-menu" part="mobile-menu">
				<saf-button
					appearance="secondary"
					product-header-item
					icon-only
					a11y-aria-label="Product header menu"
					id="button-menu-trigger"
					@click="${t=>t.handleMenuButtonClick()}"
					@keydown="${(t,e)=>t.handleButtonKeyDown(e.event)}"
					aria-expanded=${t=>t.isMenuOpen}
					aria-haspopup="menu"
					aria-controls="mobile-dropdown"
					${o.ref("menuButton")}
				>
					<saf-icon
						color="#000000"
						icon-name="ellipsis-stroke"
						appearance="light"
					></saf-icon>
				</saf-button>
				<saf-anchored-region
					class="adaptive-menu-region"
					part="adaptive-menu-region"
					anchor="button-menu-trigger"
					id="button-menu-region"
					horizontal-scaling="fill"
					vertical-scaling="content"
					@keydown="${(t,e)=>t.handleBackgroundKeyDown(e.event)}"
					${o.ref("anchoredRegion")}
				>
					<slot name="menu"></slot>
				</saf-anchored-region>
			</div>
		</div>
	</header>
`,styles:i.css`
	${t.replaceComponentNamesWithSafAttribute(":host{background-color:var(--saf-product-header-color-background-default);border-bottom:var(--saf-line-width-thin) solid var(--saf-product-header-color-border-default);box-sizing:border-box;contain:layout;container-type:inline-size;display:block;line-height:1;position:relative;z-index:var(--saf-z-index-fixed)}:host(:focus-within){z-index:var(--saf-z-index-default)}:host header,:host .navigation,:host [role=list],::slotted([slot=tasks]),::slotted([slot=global]){align-items:center;display:flex}:host .navigation{flex-grow:1;justify-content:flex-end}:host header{flex-direction:row;gap:var(--saf-spacing-2);justify-content:space-between;padding:var(--saf-spacing-2) var(--saf-spacing-8)}:host([is-menu-open=true]) .adaptive-menu-region{display:block}:host([is-menu-open=false]) .adaptive-menu-region{display:none}:host .mobile-menu,.side-nav-trigger{display:none}::slotted([slot=tasks]),::slotted([slot=global]){gap:var(--saf-spacing-1)}saf-divider{border-color:var(--saf-product-header-color-border-stronger);margin:0 var(--saf-spacing-4);min-height:40px}@container (min-width: 47.9375em){:host .header{gap:var(--saf-spacing-4)}}@container (max-width: 47.9375em){:host([has-menu-items=true]) header{padding:var(--saf-spacing-2) var(--saf-spacing-4)}:host([has-menu-items=true]) header .navigation>span,:host([has-menu-items=true]) header .navigation>saf-divider{display:none}:host([has-menu-items=true]) saf-menu saf-divider{margin:0;min-height:initial}:host([has-menu-items=true]) .mobile-menu{display:block}:host([has-menu-items=true]) ::slotted([slot=menu]){min-width:160px}:host([has-menu-items=true]) saf-anchored-region{margin-top:var(--saf-spacing-3);right:var(--saf-spacing-4);width:max-content}.side-nav-trigger{display:inline-block}}")}
`,registry:t.getRegistry()}));
